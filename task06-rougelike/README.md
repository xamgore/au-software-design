To use this, install some static server for file sharing, for example:

```
pacaur -S node-static
cd /path/to/project
static
```


## Общие сведения о системе

Игра -- случайно сгенерированная карта подземелья с монстрами и предметами. Карта состоит из стен, пола и
активных элементов (например, дверей). Предметы -- оружие и защита, которые можно надеть на игрока.
Игрок (обозначен фигуркой человека) может перемещаться по карте, сражаться с монстрами и собирать предметы.
Игрок существует в пределах карты и не может из нее выбраться, но может подниматься на уровень вверх / вниз по лестницам.
Цель игрока -- пройти все 100 уровней (на поверхность).

* У игрока есть инвентарь ограниченной вместимости, где он может хранить собранные предметы.
* Монстры могут атаковать игрока, а игрок, в свою очередь, может атаковать монстров.
* Так же есть туман войны и ограниченный взор, который позволяет смотреть не более чем на 5 клеток вдаль.
* Игра продолжается до тех пор, пока игрок либо не доберётся до поверхности, либо не умрет от атак монстров.

## Описание типичного пользователя

Ремчик -- юный фронтендер, который получает 300к в секунду, работая в Москве в компании, которая пилит
государственные тендеры. Ремчик достаточно опытный фронтендер, и в перерывах между релизами новых фреймворков
ему хочется играть в рогалики. По спицифике своей работы, он хочет играть в рогалик в браузере, пока начальство не
видит.

Ему нравится наша игра -- она очень походит на консольную и в ней есть разноцветный лог -- так начально точно подумает,
что Ремчик настраивает конфиг вебпака и видит логи его запуска в терминале. Так же, игра преимущественно тёмного цвета,
она незаметна и ненапряжна для глаз (в отличие от того же vk.com с ярким бело-синим интерфейсом).

Ремчик работает в vim'e. В нашей игре есть управление на клиавишах hjkl, для перемещения персонажа, и дополнительно
space и enter -- всё как всегда. Ремчик смышлённый, сразу видит подсказку по клавишам инвентаря, берёт оттуда меч,
и идёт на монстров. Но у наших монстров есть много стратегий -- и размножающиеся слизни, и большие зомби, и летучие мыши.
К каждому из них нужна своя стратегия, что увлекает Ремчика ещё больше.

Играть ремчик может хоть всё своё рабочее время, просто потому что в нашей игре 100 уровней, и противники развиваются ъ
вместе с персонажем.

## Композиция (диаграмма компонентов)

![](https://i.imgur.com/iFwzHCz.png)

Вся система разбивается на четыре большие компоненты:

* World – вся информация о карте и том, что на ней должно быть изображено, а также средства для создания новой карты.
* Scenes – экраны, которые видит пользователь. Внутри каждой сцены реализована логика отображения ее на экране пользователя.
* Entities – это сами монстры и персонаж игрока, шаблоны и фабрики для их создания, их взаимодействие.
* Items – это предметы, шаблоны и фабрики для их создания, их взаимодействие.

## Логическая структура (диаграмма классов)

Использовалась ранее, выложена на [телеграфе](http://telegra.ph/SD-RG-DIAG-06-01).

## Диаграмма последовательностей

![](https://i.imgur.com/ucNxIUv.jpg)

1. Изначально игрок оказывается на стартовом экране `StartScene`.
   По нажатию клавиши Enter он попадает на основной игровой экран (`PlayScene`).

2. Там он может путешествовать по нему и совершать различные действия (собирать предметы, атаковать врагов).

3. По нажатию клавиши i открывается небольшое окно с инвентарем `InventoryScene` (при этом большая часть игрового
   экрана остается видна, но взаимодействовать с ним нельзя). Игрок может вернуться на игровой экран по нажатию клавиши Esc.

4. По нажатию клавиши w открывается окно с выбором предметов, которые можно надеть (при этом большая часть игрового
   экрана остается видна, но взаимодействовать с ним нельзя). Сделав необходимые операции (надеть/снять предмет),
   игрок возвращается на игровой экран по нажатию клавиши Esc.

5. По нажатию клавиши d открывается окно с выбором предметов, которые можно сбросить (при этом большая часть игрового
   экрана остается видна, но взаимодействовать с ним нельзя). Сделав необходимые операции (сбросить один / все предметы),
   игрок возвращается на игровой экран по нажатию клавиши Esc.

6. Если игрок потерял все свои очки здоровья, он автоматически перемещается на экран с поражением (`GameOverScene`),
   откуда он может начать новую игру, нажав клавишу `Enter`.



